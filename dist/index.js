!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.easy_drawing=e():t.easy_drawing=e()}(this,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=16)}([function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e,i){"use strict";t.exports=i(5)},function(t,e,i){"use strict";t.exports=i(7)},function(t,e,i){t.exports=i(12)},function(t,e,i){"use strict";function s(){if(!(this instanceof s))return new s;this.queue=[],this.cache=null}s.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},s.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},s.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},s.prototype.rotate=function(t,e,i){var s,n,a;return 0!==t&&(this.translate(e,i),s=t*Math.PI/180,n=Math.cos(s),a=Math.sin(s),this.queue.push([n,a,-a,n,0,0]),this.cache=null,this.translate(-e,-i)),this},s.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},s.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},s.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=(e=this.cache,i=this.queue[t],[e[0]*i[0]+e[2]*i[1],e[1]*i[0]+e[3]*i[1],e[0]*i[2]+e[2]*i[3],e[1]*i[2]+e[3]*i[3],e[0]*i[4]+e[2]*i[5]+e[4],e[1]*i[4]+e[3]*i[5]+e[5]]);var e,i;return this.cache},s.prototype.calc=function(t,e,i){var s;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(s=this.cache)[0]+e*s[2]+(i?0:s[4]),t*s[1]+e*s[3]+(i?0:s[5])]):[t,e]},t.exports=s},function(t,e,i){"use strict";
/** @license React v16.13.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=i(6),n="function"==typeof Symbol&&Symbol.for,a=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,h=n?Symbol.for("react.strict_mode"):60108,c=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.memo"):60115,x=n?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function v(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function w(t,e,i){this.props=t,this.context=e,this.refs=g,this.updater=i||y}function M(){}function b(t,e,i){this.props=t,this.context=e,this.refs=g,this.updater=i||y}w.prototype.isReactComponent={},w.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(v(85));this.updater.enqueueSetState(this,t,e,"setState")},w.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},M.prototype=w.prototype;var P=b.prototype=new M;P.constructor=b,s(P,w.prototype),P.isPureReactComponent=!0;var k={current:null},C=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,i){var s,n={},r=null,o=null;if(null!=e)for(s in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(r=""+e.key),e)C.call(e,s)&&!A.hasOwnProperty(s)&&(n[s]=e[s]);var h=arguments.length-2;if(1===h)n.children=i;else if(1<h){for(var c=Array(h),l=0;l<h;l++)c[l]=arguments[l+2];n.children=c}if(t&&t.defaultProps)for(s in h=t.defaultProps)void 0===n[s]&&(n[s]=h[s]);return{$$typeof:a,type:t,key:r,ref:o,props:n,_owner:k.current}}function L(t){return"object"==typeof t&&null!==t&&t.$$typeof===a}var _=/\/+/g,E=[];function I(t,e,i,s){if(E.length){var n=E.pop();return n.result=t,n.keyPrefix=e,n.func=i,n.context=s,n.count=0,n}return{result:t,keyPrefix:e,func:i,context:s,count:0}}function O(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>E.length&&E.push(t)}function F(t,e,i){return null==t?0:function t(e,i,s,n){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var h=!1;if(null===e)h=!0;else switch(o){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case a:case r:h=!0}}if(h)return s(n,e,""===i?"."+j(e,0):i),1;if(h=0,i=""===i?".":i+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=i+j(o=e[c],c);h+=t(o,l,s,n)}else if(null===e||"object"!=typeof e?l=null:l="function"==typeof(l=m&&e[m]||e["@@iterator"])?l:null,"function"==typeof l)for(e=l.call(e),c=0;!(o=e.next()).done;)h+=t(o=o.value,l=i+j(o,c++),s,n);else if("object"===o)throw s=""+e,Error(v(31,"[object Object]"===s?"object with keys {"+Object.keys(e).join(", ")+"}":s,""));return h}(t,"",e,i)}function j(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function N(t,e){t.func.call(t.context,e,t.count++)}function q(t,e,i){var s=t.result,n=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?R(t,s,i,(function(t){return t})):null!=t&&(L(t)&&(t=function(t,e){return{$$typeof:a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,n+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(_,"$&/")+"/")+i)),s.push(t))}function R(t,e,i,s,n){var a="";null!=i&&(a=(""+i).replace(_,"$&/")+"/"),F(t,q,e=I(e,a,s,n)),O(e)}var $={current:null};function T(){var t=$.current;if(null===t)throw Error(v(321));return t}var Y={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:s};e.Children={map:function(t,e,i){if(null==t)return t;var s=[];return R(t,s,null,e,i),s},forEach:function(t,e,i){if(null==t)return t;F(t,N,e=I(null,null,e,i)),O(e)},count:function(t){return F(t,(function(){return null}),null)},toArray:function(t){var e=[];return R(t,e,null,(function(t){return t})),e},only:function(t){if(!L(t))throw Error(v(143));return t}},e.Component=w,e.Fragment=o,e.Profiler=c,e.PureComponent=b,e.StrictMode=h,e.Suspense=f,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,e.cloneElement=function(t,e,i){if(null==t)throw Error(v(267,t));var n=s({},t.props),r=t.key,o=t.ref,h=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,h=k.current),void 0!==e.key&&(r=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)C.call(e,l)&&!A.hasOwnProperty(l)&&(n[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)n.children=i;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];n.children=c}return{$$typeof:a,type:t.type,key:r,ref:o,props:n,_owner:h}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:u,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:p,render:t}},e.isValidElement=L,e.lazy=function(t){return{$$typeof:x,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return T().useCallback(t,e)},e.useContext=function(t,e){return T().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return T().useEffect(t,e)},e.useImperativeHandle=function(t,e,i){return T().useImperativeHandle(t,e,i)},e.useLayoutEffect=function(t,e){return T().useLayoutEffect(t,e)},e.useMemo=function(t,e){return T().useMemo(t,e)},e.useReducer=function(t,e,i){return T().useReducer(t,e,i)},e.useRef=function(t){return T().useRef(t)},e.useState=function(t){return T().useState(t)},e.version="16.13.0"},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var s=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function r(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach((function(t){s[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,o,h=r(t),c=1;c<arguments.length;c++){for(var l in i=Object(arguments[c]))n.call(i,l)&&(h[l]=i[l]);if(s){o=s(i);for(var u=0;u<o.length;u++)a.call(i,o[u])&&(h[o[u]]=i[o[u]])}}return h}},function(t,e,i){"use strict";var s=i(8),n=i(9),a=i(4),r=i(10),o=i(11);function h(t){if(!(this instanceof h))return new h(t);var e=s(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}h.prototype.__matrix=function(t){var e,i=this;t.queue.length&&this.iterate((function(s,n,a,r){var h,c,l,u;switch(s[0]){case"v":c=0===(h=t.calc(0,s[1],!0))[0]?["v",h[1]]:["l",h[0],h[1]];break;case"V":c=(h=t.calc(a,s[1],!1))[0]===t.calc(a,r,!1)[0]?["V",h[1]]:["L",h[0],h[1]];break;case"h":c=0===(h=t.calc(s[1],0,!0))[1]?["h",h[0]]:["l",h[0],h[1]];break;case"H":c=(h=t.calc(s[1],r,!1))[1]===t.calc(a,r,!1)[1]?["H",h[0]]:["L",h[0],h[1]];break;case"a":case"A":var p=t.toArray(),f=o(s[1],s[2],s[3]).transform(p);if(p[0]*p[3]-p[1]*p[2]<0&&(s[5]=s[5]?"0":"1"),h=t.calc(s[6],s[7],"a"===s[0]),"A"===s[0]&&s[6]===a&&s[7]===r||"a"===s[0]&&0===s[6]&&0===s[7]){c=["a"===s[0]?"l":"L",h[0],h[1]];break}c=f.isDegenerate()?["a"===s[0]?"l":"L",h[0],h[1]]:[s[0],f.rx,f.ry,f.ax,s[4],s[5],h[0],h[1]];break;case"m":u=n>0,c=["m",(h=t.calc(s[1],s[2],u))[0],h[1]];break;default:for(c=[l=s[0]],u=l.toLowerCase()===l,e=1;e<s.length;e+=2)h=t.calc(s[e],s[e+1],u),c.push(h[0],h[1])}i.segments[n]=c}),!0)},h.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=a(),e=this.__stack.length;--e>=0;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},h.prototype.toString=function(){var t,e,i=[];this.__evaluateStack();for(var s=0;s<this.segments.length;s++)e=this.segments[s][0],t=s>0&&"m"!==e&&"M"!==e&&e===this.segments[s-1][0],i=i.concat(t?this.segments[s].slice(1):this.segments[s]);return i.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")},h.prototype.translate=function(t,e){return this.__stack.push(a().translate(t,e||0)),this},h.prototype.scale=function(t,e){return this.__stack.push(a().scale(t,e||0===e?e:t)),this},h.prototype.rotate=function(t,e,i){return this.__stack.push(a().rotate(t,e||0,i||0)),this},h.prototype.skewX=function(t){return this.__stack.push(a().skewX(t)),this},h.prototype.skewY=function(t){return this.__stack.push(a().skewY(t)),this},h.prototype.matrix=function(t){return this.__stack.push(a().matrix(t)),this},h.prototype.transform=function(t){return t.trim()?(this.__stack.push(n(t)),this):this},h.prototype.round=function(t){var e,i=0,s=0,n=0,a=0;return t=t||0,this.__evaluateStack(),this.segments.forEach((function(r){var o=r[0].toLowerCase()===r[0];switch(r[0]){case"H":case"h":return o&&(r[1]+=n),n=r[1]-r[1].toFixed(t),void(r[1]=+r[1].toFixed(t));case"V":case"v":return o&&(r[1]+=a),a=r[1]-r[1].toFixed(t),void(r[1]=+r[1].toFixed(t));case"Z":case"z":return n=i,void(a=s);case"M":case"m":return o&&(r[1]+=n,r[2]+=a),n=r[1]-r[1].toFixed(t),a=r[2]-r[2].toFixed(t),i=n,s=a,r[1]=+r[1].toFixed(t),void(r[2]=+r[2].toFixed(t));case"A":case"a":return o&&(r[6]+=n,r[7]+=a),n=r[6]-r[6].toFixed(t),a=r[7]-r[7].toFixed(t),r[1]=+r[1].toFixed(t),r[2]=+r[2].toFixed(t),r[3]=+r[3].toFixed(t+2),r[6]=+r[6].toFixed(t),void(r[7]=+r[7].toFixed(t));default:return e=r.length,o&&(r[e-2]+=n,r[e-1]+=a),n=r[e-2]-r[e-2].toFixed(t),a=r[e-1]-r[e-1].toFixed(t),void r.forEach((function(e,i){i&&(r[i]=+r[i].toFixed(t))}))}})),this},h.prototype.iterate=function(t,e){var i,s,n,a=this.segments,r={},o=!1,h=0,c=0,l=0,u=0;if(e||this.__evaluateStack(),a.forEach((function(e,i){var s=t(e,i,h,c);Array.isArray(s)&&(r[i]=s,o=!0);var n=e[0]===e[0].toLowerCase();switch(e[0]){case"m":case"M":return h=e[1]+(n?h:0),c=e[2]+(n?c:0),l=h,void(u=c);case"h":case"H":return void(h=e[1]+(n?h:0));case"v":case"V":return void(c=e[1]+(n?c:0));case"z":case"Z":return h=l,void(c=u);default:h=e[e.length-2]+(n?h:0),c=e[e.length-1]+(n?c:0)}})),!o)return this;for(n=[],i=0;i<a.length;i++)if(void 0!==r[i])for(s=0;s<r[i].length;s++)n.push(r[i][s]);else n.push(a[i]);return this.segments=n,this},h.prototype.abs=function(){return this.iterate((function(t,e,i,s){var n,a=t[0],r=a.toUpperCase();if(a!==r)switch(t[0]=r,a){case"v":return void(t[1]+=s);case"a":return t[6]+=i,void(t[7]+=s);default:for(n=1;n<t.length;n++)t[n]+=n%2?i:s}}),!0),this},h.prototype.rel=function(){return this.iterate((function(t,e,i,s){var n,a=t[0],r=a.toLowerCase();if(a!==r&&(0!==e||"M"!==a))switch(t[0]=r,a){case"V":return void(t[1]-=s);case"A":return t[6]-=i,void(t[7]-=s);default:for(n=1;n<t.length;n++)t[n]-=n%2?i:s}}),!0),this},h.prototype.unarc=function(){return this.iterate((function(t,e,i,s){var n,a,o,h=[],c=t[0];return"A"!==c&&"a"!==c?null:("a"===c?(a=i+t[6],o=s+t[7]):(a=t[6],o=t[7]),0===(n=r(i,s,a,o,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(n.forEach((function(t){h.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])})),h))})),this},h.prototype.unshort=function(){var t,e,i,s,n,a=this.segments;return this.iterate((function(r,o,h,c){var l,u=r[0],p=u.toUpperCase();o&&("T"===p?(l="t"===u,"Q"===(i=a[o-1])[0]?(t=i[1]-h,e=i[2]-c):"q"===i[0]?(t=i[1]-i[3],e=i[2]-i[4]):(t=0,e=0),s=-t,n=-e,l||(s+=h,n+=c),a[o]=[l?"q":"Q",s,n,r[1],r[2]]):"S"===p&&(l="s"===u,"C"===(i=a[o-1])[0]?(t=i[3]-h,e=i[4]-c):"c"===i[0]?(t=i[3]-i[5],e=i[4]-i[6]):(t=0,e=0),s=-t,n=-e,l||(s+=h,n+=c),a[o]=[l?"c":"C",s,n,r[1],r[2],r[3],r[4]]))})),this},t.exports=h},function(t,e,i){"use strict";var s={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function a(t){return t>=48&&t<=57}function r(t){return t>=48&&t<=57||43===t||45===t||46===t}function o(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function h(t){for(;t.index<t.max&&(10===(e=t.path.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&n.indexOf(e)>=0);)t.index++;var e}function c(t){var e=t.path.charCodeAt(t.index);return 48===e?(t.param=0,void t.index++):49===e?(t.param=1,void t.index++):void(t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")")}function l(t){var e,i=t.index,s=i,n=t.max,r=!1,o=!1,h=!1,c=!1;if(s>=n)t.err="SvgPath: missed param (at pos "+s+")";else if(43!==(e=t.path.charCodeAt(s))&&45!==e||(e=++s<n?t.path.charCodeAt(s):0),a(e)||46===e){if(46!==e){if(r=48===e,e=++s<n?t.path.charCodeAt(s):0,r&&s<n&&e&&a(e))return void(t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+i+")");for(;s<n&&a(t.path.charCodeAt(s));)s++,o=!0;e=s<n?t.path.charCodeAt(s):0}if(46===e){for(c=!0,s++;a(t.path.charCodeAt(s));)s++,h=!0;e=s<n?t.path.charCodeAt(s):0}if(101===e||69===e){if(c&&!o&&!h)return void(t.err="SvgPath: invalid float exponent (at pos "+s+")");if(43!==(e=++s<n?t.path.charCodeAt(s):0)&&45!==e||s++,!(s<n&&a(t.path.charCodeAt(s))))return void(t.err="SvgPath: invalid float exponent (at pos "+s+")");for(;s<n&&a(t.path.charCodeAt(s));)s++}t.index=s,t.param=parseFloat(t.path.slice(i,s))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+s+")"}function u(t){var e,i;i=(e=t.path[t.segmentStart]).toLowerCase();var n=t.data;if("m"===i&&n.length>2&&(t.result.push([e,n[0],n[1]]),n=n.slice(2),i="l",e="m"===e?"l":"L"),"r"===i)t.result.push([e].concat(n));else for(;n.length>=s[i]&&(t.result.push([e].concat(n.splice(0,s[i]))),s[i]););}function p(t){var e,i,n,a,o,p=t.max;if(t.segmentStart=t.index,e=t.path.charCodeAt(t.index),i=97==(32|e),function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(e))if(a=s[t.path[t.index].toLowerCase()],t.index++,h(t),t.data=[],a){for(n=!1;;){for(o=a;o>0;o--){if(!i||3!==o&&4!==o?l(t):c(t),t.err.length)return;t.data.push(t.param),h(t),n=!1,t.index<p&&44===t.path.charCodeAt(t.index)&&(t.index++,h(t),n=!0)}if(!n){if(t.index>=t.max)break;if(!r(t.path.charCodeAt(t.index)))break}}u(t)}else u(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}t.exports=function(t){var e=new o(t),i=e.max;for(h(e);e.index<i&&!e.err.length;)p(e);return e.err.length?e.result=[]:e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}}},function(t,e,i){"use strict";var s=i(4),n={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},a=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,r=/[\s,]+/;t.exports=function(t){var e,i,o=new s;return t.split(a).forEach((function(t){if(t.length)if(void 0===n[t])switch(i=t.split(r).map((function(t){return+t||0})),e){case"matrix":return void(6===i.length&&o.matrix(i));case"scale":return void(1===i.length?o.scale(i[0],i[0]):2===i.length&&o.scale(i[0],i[1]));case"rotate":return void(1===i.length?o.rotate(i[0],0,0):3===i.length&&o.rotate(i[0],i[1],i[2]));case"translate":return void(1===i.length?o.translate(i[0],0):2===i.length&&o.translate(i[0],i[1]));case"skewX":return void(1===i.length&&o.skewX(i[0]));case"skewY":return void(1===i.length&&o.skewY(i[0]))}else e=t})),o}},function(t,e,i){"use strict";var s=2*Math.PI;function n(t,e,i,s){var n=t*i+e*s;return n>1&&(n=1),n<-1&&(n=-1),(t*s-e*i<0?-1:1)*Math.acos(n)}function a(t,e){var i=4/3*Math.tan(e/4),s=Math.cos(t),n=Math.sin(t),a=Math.cos(t+e),r=Math.sin(t+e);return[s,n,s-n*i,n+s*i,a+r*i,r-a*i,a,r]}t.exports=function(t,e,i,r,o,h,c,l,u){var p=Math.sin(u*s/360),f=Math.cos(u*s/360),d=f*(t-i)/2+p*(e-r)/2,x=-p*(t-i)/2+f*(e-r)/2;if(0===d&&0===x)return[];if(0===c||0===l)return[];c=Math.abs(c),l=Math.abs(l);var m=d*d/(c*c)+x*x/(l*l);m>1&&(c*=Math.sqrt(m),l*=Math.sqrt(m));var v=function(t,e,i,a,r,o,h,c,l,u){var p=u*(t-i)/2+l*(e-a)/2,f=-l*(t-i)/2+u*(e-a)/2,d=h*h,x=c*c,m=p*p,v=f*f,y=d*x-d*v-x*m;y<0&&(y=0),y/=d*v+x*m;var g=(y=Math.sqrt(y)*(r===o?-1:1))*h/c*f,w=y*-c/h*p,M=u*g-l*w+(t+i)/2,b=l*g+u*w+(e+a)/2,P=(p-g)/h,k=(f-w)/c,C=(-p-g)/h,A=(-f-w)/c,S=n(1,0,P,k),L=n(P,k,C,A);return 0===o&&L>0&&(L-=s),1===o&&L<0&&(L+=s),[M,b,S,L]}(t,e,i,r,o,h,c,l,p,f),y=[],g=v[2],w=v[3],M=Math.max(Math.ceil(Math.abs(w)/(s/4)),1);w/=M;for(var b=0;b<M;b++)y.push(a(g,w)),g+=w;return y.map((function(t){for(var e=0;e<t.length;e+=2){var i=t[e+0],s=t[e+1],n=f*(i*=c)-p*(s*=l),a=p*i+f*s;t[e+0]=n+v[0],t[e+1]=a+v[1]}return t}))}},function(t,e,i){"use strict";var s=Math.PI/180;function n(t,e,i){if(!(this instanceof n))return new n(t,e,i);this.rx=t,this.ry=e,this.ax=i}n.prototype.transform=function(t){var e=Math.cos(this.ax*s),i=Math.sin(this.ax*s),n=[this.rx*(t[0]*e+t[2]*i),this.rx*(t[1]*e+t[3]*i),this.ry*(-t[0]*i+t[2]*e),this.ry*(-t[1]*i+t[3]*e)],a=n[0]*n[0]+n[2]*n[2],r=n[1]*n[1]+n[3]*n[3],o=((n[0]-n[3])*(n[0]-n[3])+(n[2]+n[1])*(n[2]+n[1]))*((n[0]+n[3])*(n[0]+n[3])+(n[2]-n[1])*(n[2]-n[1])),h=(a+r)/2;if(o<1e-10*h)return this.rx=this.ry=Math.sqrt(h),this.ax=0,this;var c=n[0]*n[1]+n[2]*n[3],l=h+(o=Math.sqrt(o))/2,u=h-o/2;return this.ax=Math.abs(c)<1e-10&&Math.abs(l-r)<1e-10?90:180*Math.atan(Math.abs(c)>Math.abs(l-r)?(l-a)/c:c/(l-r))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(l),this.ry=Math.sqrt(u)):(this.ax+=90,this.rx=Math.sqrt(u),this.ry=Math.sqrt(l)),this},n.prototype.isDegenerate=function(){return this.rx<1e-10*this.ry||this.ry<1e-10*this.rx},t.exports=n},function(t,e,i){var s=i(13);function n(t){return new s(t).getBoundingBox()}t.exports=n,n.Path=s},function(t,e,i){var s=i(14),n=i(15),a=i(2);function r(t){this.d=t}t.exports=r,r.prototype={getBoundingBox:function(){var t,e;return t=new a(this.d),e=new s,t.abs().unarc().unshort().iterate((function(t,i,s,n){switch(t[0]){case"M":case"L":e.addPoint(t[1],t[2]);break;case"H":e.addX(t[1]);break;case"V":e.addY(t[1]);break;case"Q":e.addQuadraticCurve(s,n,t[1],t[2],t[3],t[4]);break;case"C":e.addBezierCurve(s,n,t[1],t[2],t[3],t[4],t[5],t[6])}})),new n(e)}}},function(t,e){function i(t,e,i,s){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.addPoint(t,e),this.addPoint(i,s)}t.exports=i,i.prototype={width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},addPoint:function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},addX:function(t){this.addPoint(t,null)},addY:function(t){this.addPoint(null,t)},addQuadraticCurve:function(t,e,i,s,n,a){var r=t+2/3*(i-t),o=e+2/3*(s-e),h=r+1/3*(n-t),c=o+1/3*(a-e);this.addBezierCurve(t,e,r,h,o,c,n,a)},addBezierCurve:function(t,e,i,s,n,a,r,o){var h,c=[t,e],l=[i,s],u=[n,a],p=[r,o];for(this.addPoint(c[0],c[1]),this.addPoint(p[0],p[1]),h=0;h<=1;h++){var f=function(t){return Math.pow(1-t,3)*c[h]+3*Math.pow(1-t,2)*t*l[h]+3*(1-t)*Math.pow(t,2)*u[h]+Math.pow(t,3)*p[h]},d=6*c[h]-12*l[h]+6*u[h],x=-3*c[h]+9*l[h]-9*u[h]+3*p[h],m=3*l[h]-3*c[h];if(0!=x){var v=Math.pow(d,2)-4*m*x;if(!(v<0)){var y=(-d+Math.sqrt(v))/(2*x);0<y&&y<1&&(0==h&&this.addX(f(y)),1==h&&this.addY(f(y)));var g=(-d-Math.sqrt(v))/(2*x);0<g&&g<1&&(0==h&&this.addX(f(g)),1==h&&this.addY(f(g)))}}else{if(0==d)continue;var w=-m/d;0<w&&w<1&&(0==h&&this.addX(f(w)),1==h&&this.addY(f(w)))}}}}},function(t,e){function i(t){this.x1=this.minX=t.x1||0,this.y1=this.minY=t.y1||0,this.x2=this.maxX=t.x2||0,this.y2=this.maxY=t.y2||0,this.width=t.width()||0,this.height=t.height()||0}t.exports=i,i.prototype={round:function(t){return t=t||0,this.x1=this.minX=+this.x1.toFixed(t),this.y1=this.minY=+this.y1.toFixed(t),this.x2=this.maxX=+this.x2.toFixed(t),this.y2=this.maxY=+this.y2.toFixed(t),this.width=+this.width.toFixed(t),this.height=+this.height.toFixed(t),this},scale:function(t){var e=this;return t=t||1,["x1","minX","y1","minY","x2","maxX","y2","maxY","width","height"].forEach((function(i){e[i]=e[i]*t})),this},toString:function(){return[this.minX,this.minY,this.width,this.height].join(" ")}}},function(t,e,i){"use strict";i.r(e);var s=i(0),n=i.n(s),a=i(1),r=i.n(a),o=function(t){var e=[],i=null,s=function(){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];e=n,i||(i=requestAnimationFrame((function(){i=null,t.apply(void 0,e)})))};return s.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},s};function h(t){const e=t,i=[],s=20037508.34*e[0]/180;Math.abs(e[1])>85.05112877980659&&(e[1]=85.05112877980659*Math.abs(e[1])/e[1]);let n=Math.log(Math.tan((90+e[1])*Math.PI/360))/(Math.PI/180);return n=20037508.34*n/180,i[0]=s,i[1]=n,i}function c(t){var e,i,s,n,a,r,o,h,c,l,u,p,f,d;u=114,p=0,f=5e5,d=0,0==(l=3)&&(e=6378245,i=6356863.0188),1==l&&(e=6378140,i=6356755.2882),2==l&&(e=6378137,i=6356752.3142),3==l&&(e=6378137,i=6356752.314140356),s=(e-i)/e,n=Math.sqrt(2*s-Math.pow(s,2)),a=n/Math.sqrt(1-Math.pow(n,2)),h=u,c=p,r=f,o=d;var x,m,v,y,g,w=t[1],M=t[0],b={},P=(w-c)*Math.PI/180,k=(M-h)*Math.PI/180,C=e/Math.sqrt(1-Math.pow(n*Math.sin(P),2)),A=Math.pow(e,2)/i;m=(x=1-3*Math.pow(a,2)/4+45*Math.pow(a,4)/64-175*Math.pow(a,6)/256+11025*Math.pow(a,8)/16384)-1,v=15/32*Math.pow(a,4)-175/384*Math.pow(a,6)+3675/8192*Math.pow(a,8),y=0-35/96*Math.pow(a,6)+735/2048*Math.pow(a,8),g=315/1024*Math.pow(a,8);var S=A*(x*P+Math.sin(P)*(m*Math.cos(P)+v*Math.pow(Math.cos(P),3)+y*Math.pow(Math.cos(P),5)+g*Math.pow(Math.cos(P),7))),L=Math.tan(P),_=a*Math.cos(P),E=S+Math.pow(k,2)/2*C*Math.sin(P)*Math.cos(P)+Math.pow(k,4)*C*Math.sin(P)*Math.pow(Math.cos(P),3)/24*(5-Math.pow(L,2)+9*Math.pow(_,2)+4*Math.pow(_,4))+Math.pow(k,6)*C*Math.sin(P)*Math.pow(Math.cos(P),5)*(61-58*Math.pow(L,2)+Math.pow(L,4))/720,I=k*C*Math.cos(P)+Math.pow(k,3)*C/6*Math.pow(Math.cos(P),3)*(1-Math.pow(L,2)+Math.pow(_,2))+Math.pow(k,5)*C/120*Math.pow(Math.cos(P),5)*(5-18*Math.pow(L,2)+Math.pow(L,4)+14*Math.pow(_,2)-58*Math.pow(_,2)*Math.pow(L,2));return b.x=I+r,b.y=E+o,[b.x,b.y]}const l=window.devicePixelRatio,u=2===l?1:2;function p(t,e){t?e():setTimeout(()=>{p(t,e)},0)}const f={animQueue:{},_a:!1,_id:null};function d(){Object.values(f.animQueue).forEach((function(t){t()})),f._a&&(f._id=window.requestAnimationFrame(d))}function x(t){const e=`animation_${(Math.random()*Math.random()).toString().replace(/\./g,"")}`;return f.animQueue[e]=t,f._a||(window.cancelAnimationFrame(f._id),f._id=window.requestAnimationFrame(d),f._a=!0),{stop(){delete f.animQueue[e],0===Object.keys(f.animQueue).length&&(f._a=!1)}}}class m extends r.a.Component{constructor(...t){super(...t),n()(this,"canvas",null)}componentDidMount(){p(this.canvas,this.initCanvas.bind(this))}initCanvas(){const t=window.getComputedStyle(this.canvas.parentNode),e=window.parseFloat(t.getPropertyValue("width")),i=window.parseFloat(t.getPropertyValue("height"));this.canvas.style.width=`${e}px`,this.canvas.style.height=`${i}px`,this.canvas.width=e*l,this.canvas.height=i*l}render(){const{style:t}=this.props;let e=t||{};return r.a.createElement("canvas",{ref:t=>this.canvas=t,style:{...e}})}}var v=m;var y=class{constructor(t,e,i,s,n,a,r,o){this.points=t,this.context=e,this.fillStyle=i||"rgba(111,149,255,0.4)",this.strokeStyle=s||"rgba(111,149,255,0.4",this.name=n,this.shadowColor=a,this.click=r,this.over=o,this.reover=0}createMapPath(){Array.isArray(this.points)&&(this.context.beginPath(),this.points.forEach((t,e)=>{0===e?this.context.moveTo(t[0],t[1]):this.context.lineTo(t[0],t[1])}),this.context.closePath())}drawMap(t,e){this.context.save(),this.createMapPath(),this.context.fillStyle=t||this.fillStyle,this.context.strokeStyle=e||this.strokeStyle,this.shadowColor&&(this.context.shadowColor=this.shadowColor,this.context.shadowBlur=10),this.context.fill(),this.context.stroke(),this.drawName(),this.context.restore()}drawName(){if(Array.isArray(this.points)&&this.name&&this.name.text&&!1!==this.name.show){let t=null,e=null,i=null,s=null,n=(this.points.map(n=>{let a=n[0],r=n[1];return i=null===i?a:Math.max(i,a),t=null===t?a:Math.min(t,a),s=null===s?r:Math.max(s,r),e=null===e?r:Math.min(e,r),{x:a,y:r}}),{x:(i+t)/2,y:(s+e)/2});const a=this.name.fontSize||"12px",r=parseFloat(a);let o=0;for(let t=0;t<a.length;t+=1)if(0!==t&&"."!==a[t]&&!/^\d+$/.test(a[t])){o=t;break}this.context.font=`${r*Math.sqrt(Math.pow(l,2))}${a.slice(o)} Arial`,this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillStyle=this.name.color||"#fff",this.context.fillText(this.name.text,n.x,n.y)}}clearMap(){this.createMapPath(),this.context.save(),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore()}};var g=class{constructor(t,e,i,s,a,r,o){n()(this,"animate",(function(t){this.tempRadius1>1.7*this.radius?this.tempRadius1=this.radius:this.tempRadius1+=this.step,this.tempRadius2>1.7*this.radius?this.tempRadius2=this.radius:this.tempRadius2+=this.step,this.tempRadius3>1.7*this.radius?this.tempRadius3=this.radius:this.tempRadius3+=this.step,this.drawAnimate(t)})),n()(this,"start",(function(t){this.timer=x(this.animate.bind(this,t))})),n()(this,"stop",(function(){this.timer&&this.timer.stop()})),this.x=e,this.y=i,this.radius=s,this.step=s/150,this.color=a||"yellow",this.context=t,this.tempRadius1=this.radius,this.tempRadius2=1.35*this.radius,this.tempRadius3=1.7*this.radius,this.animationID=null,this.click=r,this.over=o,this.reover=0,this.GENAME="scatter"}normalized(t,e,i,s,n){return(n-s)*(t-e)/(i-e)+s}createPath(){this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI)}strokePath(t){this.context.save(),this.context.strokeStyle=t||this.color,this.context.stroke(),this.context.restore()}fillPath(t){this.context.save(),this.context.fillStyle=t||this.color,this.context.fill(),this.context.restore()}strokeFlashCirclePath(t,e){this.context.save(),this.context.beginPath();let i=1-this.normalized(t,this.radius,1.7*this.radius,0,1);this.context.globalAlpha=i<0?.05:i,this.context.arc(this.x,this.y,t,0,2*Math.PI),this.strokePath(e),this.context.restore()}drawAnimate(t){this.context.save(),this.context.save(),this.context.beginPath(),this.context.arc(this.x,this.y,2*this.radius,0,2*Math.PI),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore(),this.createPath(),this.fillPath(t),this.strokeFlashCirclePath(this.tempRadius1,t),this.strokeFlashCirclePath(this.tempRadius2,t),this.strokeFlashCirclePath(this.tempRadius3,t),this.context.restore()}},w=i(2),M=i.n(w),b=i(3),P=i.n(b);var k=class{constructor({path:t,context:e,center:i,point:s,ratio:n,color:a,mouseClick:r,mouseOver:o}){this.svg=window.document.createElementNS("http://www.w3.org/2000/svg","path"),this.context=e,this.center=i,this.point=[...s],this.spoint=[...s],this.ratio=n,this.path="",this.rotate=0,this.scale=1,this.color=a||"yellow",this.draw="fill",this.realPath="",this.reover=0,"string"==typeof t&&(this.path=t),"object"==typeof t&&(t.hasOwnProperty("rotate")&&(this.rotate=t.rotate),t.hasOwnProperty("d")&&(this.path=t.d),t.hasOwnProperty("scale")&&(this.scale=t.scale),t.hasOwnProperty("color")&&(this.color=t.color),t.hasOwnProperty("draw")&&(this.draw=t.draw)),this.click=r,this.over=o,this.GENAME="symbol"}initPath(){if("string"!=typeof this.path||0===this.path.length)throw new Error("d must not be empty");const t=M()(this.path);this.realPath=t.rotate(this.rotate).scale(this.scale).rel().toString()}convertPoint(t){const e=h(t||this.point);this.spoint=[(e[0]-this.center[0])*this.ratio,(this.center[1]-e[1])*this.ratio]}reWritePath(){let t=0;for(let e=0;e<this.realPath.length;e+=1){if("m"!==this.realPath[0].toLowerCase())throw new Error("path should begin with M");if(0!==e&&/^[A-Za-z]*$/.test(this.realPath[e])){t=e;break}}const e=this.realPath.slice(1,t);for(let i=0;i<e.length;i+=1)if(0!==i&&"."!==e[i]&&!/^\d+$/.test(e[i])){t=i;break}const i=window.parseFloat(e.slice(0,t)),s=window.parseFloat(e.slice(t));try{const t=P()(this.realPath),n=(t.minX+t.maxX)/2-i,a=(t.maxY+t.minY)/2-s,r=this.spoint[0]-n,o=this.spoint[1]-a;this.realPath=this.realPath.replace(e,`${r} ${o}`)}catch{const t=this.spoint[0],i=this.spoint[1];this.realPath=this.realPath.replace(e,`${t} ${i}`)}}createPath(t){this.svg.setAttributeNS(null,"d",t||this.realPath);const e=this.svg.getTotalLength(),i=e/100;this.context.beginPath();for(let t=0;t<=e;t+=i){const e=parseFloat(this.svg.getPointAtLength(t).x),i=parseFloat(this.svg.getPointAtLength(t).y);0===t&&this.context.moveTo(e,i),0!==t&&this.context.lineTo(e,i)}this.context.closePath()}fillPath(t){this.context.fillStyle=t||this.color,this.context.fill()}strokePath(t){this.context.strokeStyle=t||this.color,this.context.stroke()}cleanPath(){this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height)}prepareAction(t){this.initPath(),Array.isArray(this.center)?(t&&this.convertPoint(t),!t&&this.convertPoint()):this.spoint=t||this.spoint,this.reWritePath(),this.createPath()}fill({color:t,point:e}){this.prepareAction(e),this.fillPath(t)}stroke({color:t,point:e}){this.prepareAction(e),this.strokePath(t)}render({color:t,point:e}={}){"function"==typeof this[this.draw]&&this[this.draw]({color:t,point:e})}clean(){this.context.save();const t=P()(this.realPath),e=t.minX-7*this.context.lineWidth,i=t.minY-7*this.context.lineWidth;this.context.beginPath(),this.context.rect(e,i,t.height+14*this.context.lineWidth,t.width+14*this.context.lineWidth),this.cleanPath(),this.context.restore()}};var C=class{constructor(t,e,i,s,n,a){let{src:r="",width:o=50,height:h=50,offsetX:c=.5,offsetY:l=.5}=s;this.x=e,this.y=i,this.context=t,this.src=r,"string"==typeof o&&-1!==o.indexOf("%")&&(o=parseFloat(o)/100*t.canvas.width),this.width=o,"string"==typeof h&&-1!==h.indexOf("%")&&(h=parseFloat(h)/100*t.canvas.height),this.height=h,this.offsetX=c,this.offsetY=l,this.click=n,this.over=a,this.reover=0,this.GENAME="img"}createPath(){this.context.beginPath(),this.context.rect(this.x-this.offsetX*this.width,this.y-this.height*this.offsetY,this.width,this.height)}render(){return this.image=new Image(this.width,this.height),this.image.src=this.src,new Promise(t=>{this.image.onload=()=>{this.context.drawImage(this.image,this.x-this.offsetX*this.width,this.y-this.height*this.offsetY,this.width,this.height),t()}})}};var A=class{constructor(t){this.points=[...t.points],this.symbol=t.symbol,this.color=t.color||"yellow",this.width=t.width||2,this.animation=t.animation||"alternate",this.speed=Math.abs(t.speed),this.delay=t.delay||0,this.context=t.context,this.scontext=t.scontext,this.svg=window.document.createElementNS("http://www.w3.org/2000/svg","path"),this.path="",this.pathLength=0,this.spanLength=0,this.symPathLength=0,this.symSpanLength=0,this.step=0,this.symStep=0,this.animationID,this.clip,this.symbolInstance}getSpeed(t){return 1e3/Math.sqrt(t,2)+1}initSvgPath(){this.points.forEach((t,e)=>{0===e&&(this.path=`M${t.join(" ")}`),0!==e&&(this.path=`${this.path}L${t.join(" ")}`)})}initAnimate(){this.svg.setAttributeNS(null,"d",this.path),this.pathLength=this.svg.getTotalLength(),isNaN(this.speed)||!this.speed?this.spanLength=this.pathLength/100:this.spanLength=this.pathLength/this.getSpeed(this.speed)}initSymbolAnimate(t){const e=Math.abs(t);this.svg.setAttributeNS(null,"d",this.path),this.symPathLength=this.svg.getTotalLength(),isNaN(e)||!this.speed?this.symSpanLength=this.symPathLength/100:this.symSpanLength=this.symPathLength/this.getSpeed(e)}initStaticPath(){this.context.beginPath(),this.points.forEach((t,e)=>{0===e&&this.context.moveTo(...t),0!==e&&this.context.lineTo(...t)})}stroke(){this.context.save(),this.context.strokeStyle=this.color,this.context.lineCap="round",this.context.lineJoin="round",this.context.lineWidth=this.width,this.context.stroke(),this.context.restore()}alternate(){this.initSvgPath(),new Promise(t=>{this.timeoutID=setTimeout(t,this.delay)}).then(()=>{this.initAnimate(),this.animationID=x(this.alternateA.bind(this))}),this.runSymbol()}alternateA(){this.step>=this.pathLength&&(this.step=0,this.clip=!this.clip),this.step+=this.spanLength;let t=this.step;const e=parseFloat(this.svg.getPointAtLength(t).x),i=parseFloat(this.svg.getPointAtLength(t).y);t-=this.spanLength;const s=parseFloat(this.svg.getPointAtLength(t).x),n=parseFloat(this.svg.getPointAtLength(t).y);this.clip?(this.context.beginPath(),this.context.save(),this.context.arc(e,i,this.spanLength,0,2*Math.PI),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore()):(this.context.beginPath(),this.context.moveTo(s,n),this.context.lineTo(e,i),this.context.save(),this.context.strokeStyle=this.color,this.context.lineWidth=this.width,this.context.stroke(),this.context.restore())}symbolA(){this.symStep>=this.symPathLength&&(this.symStep=0),this.symStep+=this.symSpanLength;let t=this.symStep;const e=parseFloat(this.svg.getPointAtLength(t).x),i=parseFloat(this.svg.getPointAtLength(t).y);this.symbolInstance&&(this.symbolInstance.clean(),this.symbolInstance.render({point:[e,i]}))}normal(){this.initStaticPath(),this.stroke(),this.initSvgPath(),this.runSymbol()}runSymbol(){this.symbol&&"object"==typeof this.symbol&&"string"==typeof this.symbol.d&&("number"==typeof this.symbol.delay?new Promise(t=>{this.stimeoutID=setTimeout(t,this.symbol.delay)}).then(()=>{this.symbolStart()}):this.symbolStart())}symbolStart(){this.symbolInstance=new k({path:this.symbol,context:this.scontext,point:this.points[0],color:this.color}),this.symbolInstance.render(),this.initSymbolAnimate(this.symbol.speed),this.symbolAID=x(this.symbolA.bind(this))}stop(){this.animationID&&this.animationID.stop(),this.symbolAID&&this.symbolAID.stop(),this.timeoutID&&window.clearTimeout(this.timeoutID),this.stimeoutID&&window.clearTimeout(this.stimeoutID)}};var S=class{constructor(t,e,i,s,n,a,r){this.x=e,this.y=i,this.radius=s,this.color=n||"yellow",this.context=t,this.click=a,this.over=r,this.reover=0,this.GENAME="circle"}createPath(){this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI)}createLPath(){this.context.beginPath(),this.context.arc(this.x,this.y,1.5*this.radius,0,2*Math.PI)}createCleanPath(){this.context.beginPath(),this.context.arc(this.x,this.y,2*this.radius,0,2*Math.PI)}fillSPath(t){this.context.save(),this.context.fillStyle=t||this.color,this.context.fill(),this.context.restore()}fillLPath(t){this.context.save(),this.context.globalAlpha=.4,this.context.fillStyle=t||this.color,this.context.fill(),this.context.restore()}fill(t){this.createLPath(),this.fillLPath(t),this.createPath(),this.fillSPath(t)}clear(){this.createCleanPath(),this.context.save(),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore()}};var L=class{constructor(t,e,i,s,n,a,r,o){this.text=t||"",this.size=a||"12px",this.x=i,this.y=s,this.color=n||"#fff",this.context=e,this.align=r||"center",this.vertical=o||"middle",this.reover=0,this.GENAME="text"}fillText(){this.context.save();const t=this.size,e=parseFloat(t);let i=0;for(let e=0;e<t.length;e+=1)if(0!==e&&"."!==t[e]&&!/^\d+$/.test(t[e])){i=e;break}this.context.font=`${e*Math.sqrt(Math.pow(l,2))}${t.slice(i)} Arial`,this.context.fillStyle=this.color,this.context.textAlign=this.align,this.context.textBaseline=this.vertical,this.context.fillText(this.text,this.x,this.y),this.context.restore()}clearText(){this.context.save();const t=this.text.length,e=this.context.measureText(this.text).width,i=Math.ceil(e/t);this.context.rect(this.x-Math.ceil(e/2),this.y-i,1.5*e,1.5*i),this.context.clip(),this.context.clearRect(-this.context.canvas.width/2,-this.context.canvas.height/2,this.context.canvas.width,this.context.canvas.height),this.context.restore()}};class _ extends r.a.Component{constructor(...t){super(...t),n()(this,"canvas",null),n()(this,"scatterCanvas",null),n()(this,"pathsCanvas",null),n()(this,"pathsymbolCanvas",null),n()(this,"maxLng",null),n()(this,"minLng",null),n()(this,"maxLat",null),n()(this,"minLat",null),n()(this,"centerPoint",null),n()(this,"ratio",null),n()(this,"areaList",[]),n()(this,"scatterList",[]),n()(this,"pathsList",[]),n()(this,"textList",[]),n()(this,"initBounds",()=>{let t=this.props.areas;if(Array.isArray(t)&&t.length>0){this.maxLng=null,this.minLng=null,this.maxLat=null,this.minLat=null;for(let e=0;e<t.length;e+=1)Array.isArray(t[e].polygon)&&t[e].polygon.forEach(t=>{let e="gauss"!==this.props.geoType?h(t):c(t);const i=e[0],s=e[1];null===this.maxLng?this.maxLng=i:this.maxLng=Math.max(this.maxLng,i),null===this.minLng?this.minLng=i:this.minLng=Math.min(this.minLng,i),null===this.maxLat?this.maxLat=s:this.maxLat=Math.max(this.maxLat,s),null===this.minLat?this.minLat=s:this.minLat=Math.min(this.minLat,s)})}}),n()(this,"mapRender",()=>{this.areaList=[],this.scatterList.forEach(t=>{"function"==typeof t.stop&&t.stop()}),this.pathsList.forEach(t=>{"function"==typeof t.stop&&t.stop()}),this.textList.forEach(t=>{"function"==typeof t.clearText&&t.clearText()}),this.scatterList=[],this.pathsList=[],this.initBounds(),this.initCenter(),this.initAreas(),this.renderAreas(),this.initScatters(),this.initPaths(),this.initTexts()}),n()(this,"initCenter",()=>{const t=this.props.areas,e=this.props.size;if(Array.isArray(t)&&null!==this.maxLng&&null!==this.maxLat&&null!==this.minLng&&null!==this.minLat){const t=this.canvas.canvas;let i=[this.minLng,this.minLat],s=[this.maxLng,this.maxLat],n=[(s[0]+i[0])/2,(s[1]+i[1])/2],a=Math.min(t.width,t.height),r=Math["cover"===e?"min":"max"](s[1]-i[1],s[0]-i[0]),o=Math.sqrt(Math.pow(a,2)+Math.pow(a,2))/Math.sqrt(Math.pow(r,2)+Math.pow(r,2));this.ratio=o,this.centerPoint=n}}),n()(this,"initAreas",()=>{const t=this.props.areas;if(!Array.isArray(t))return;const e=this.canvas.canvas.getContext("2d");e.translate(e.canvas.width/2,e.canvas.height/2);for(let i=0;i<t.length;i+=1){const s=t[i];if(Array.isArray(s.polygon)){let t=[...s.polygon];t=t.map(t=>{let e="gauss"!==his.props.geoType?h(t):c(t);return[(e[0]-this.centerPoint[0])*this.ratio,(this.centerPoint[1]-e[1])*this.ratio]}),this.areaList.push(new y(t,e,s.fillStyle,s.strokeStyle,s.name,s.shadowColor,s.mouseClick,s.mouseOver))}}}),n()(this,"renderAreas",()=>{this.areaList.forEach(t=>{t.drawMap()})}),n()(this,"initScatters",()=>{let t=this.props.scatters;if(Array.isArray(t)){const e=this.scatterCanvas.canvas.getContext("2d");e.translate(e.canvas.width/2,e.canvas.height/2),t.forEach(async t=>{let i="gauss"!==his.props.geoType?h(t.point):c(t.point),s=(i[0]-this.centerPoint[0])*this.ratio,n=(this.centerPoint[1]-i[1])*this.ratio;if(t.pointAtCanvas&&t.pointAtCanvas({x:(s+e.canvas.width/2)/l,y:(n+e.canvas.height/2)/l}),!t.hidden)if(t.path){const i=new k({path:t.path,context:e,center:this.centerPoint,point:t.point,ratio:this.ratio,color:t.color,mouseClick:t.mouseClick,mouseOver:t.mouseOver});i.render(),this.scatterList.push(i)}else if(t.img){const i=new C(e,s,n,t.img,t.mouseClick,t.mouseOver);await i.render(),this.scatterList.push(i)}else{let i;const a="number"==typeof t.size?t.size/u:10;"static"===t.mode?(i=new S(e,s,n,a,t.color,t.mouseClick,t.mouseOver),i.fill()):(i=new g(e,s,n,a,t.color,t.mouseClick,t.mouseOver),i.start()),this.scatterList.push(i)}})}}),n()(this,"initPaths",()=>{let t=this.props.paths;if(Array.isArray(t)){const e=this.pathsCanvas.canvas.getContext("2d");e.translate(e.canvas.width/2,e.canvas.height/2);const i=this.pathsymbolCanvas.canvas.getContext("2d");i.translate(i.canvas.width/2,i.canvas.height/2),t.forEach(t=>{const s=t.points;if(!Array.isArray(s)||s.length<2)return void console.error("there should be at least two sets of points in path");const n=s.map(t=>{const e="gauss"!==his.props.geoType?h(t):c(t);return[(e[0]-this.centerPoint[0])*this.ratio,(this.centerPoint[1]-e[1])*this.ratio]}),a=new A({points:n,symbol:t.symbol,width:t.width,animation:t.animation,color:t.color,speed:t.speed,delay:t.delay,context:e,scontext:i});"function"==typeof a[t.animation||"alternate"]&&a[t.animation||"alternate"](),this.pathsList.push(a)})}}),n()(this,"initTexts",()=>{let t=this.props.texts;if(Array.isArray(t)){const e=this.textCanvas.canvas.getContext("2d");e.translate(e.canvas.width/2,e.canvas.height/2),t.forEach(t=>{let i="gauss"!==his.props.geoType?h(t.point):c(t.point),s=(i[0]-this.centerPoint[0])*this.ratio,n=(this.centerPoint[1]-i[1])*this.ratio;if("string"==typeof t.text){const i=new L(t.text,e,s,n,t.color,t.size,t.align,t.vertical);i.fillText(),this.textList.push(i)}})}}),n()(this,"mapClick",t=>{const e=t.target.getBoundingClientRect(),i=t.clientX,s=t.clientY,n=(i-e.left)*l,a=(s-e.top)*l,r=this.areaList;for(let t=0;t<r.length;t+=1){const e=r[t];e.createMapPath(),e.context.isPointInPath(n,a)&&"function"==typeof e.click&&e.click({x:n/l,y:a/l,screenX:i,screenY:s})}const o=this.scatterList;for(let t=0;t<o.length;t+=1){const e=o[t];e.createPath(),e.context.isPointInPath(n,a)&&"function"==typeof e.click&&e.click({x:n/l,y:a/l,screenX:i,screenY:s})}}),n()(this,"overFun",(t,e,i,s)=>{const n=this.areaList;for(let a=0;a<n.length;a+=1){const r=n[a];"object"==typeof r.over&&(r.createMapPath(),r.context.isPointInPath(t,e)?(r.clearMap(),r.drawMap(r.over.fillStyle),r.reover=1,this.runIn(r,{x:t/l,y:e/l,screenX:i,screenY:s})):1===r.reover&&(r.clearMap(),r.drawMap(),this.runOut(r),r.reover=0))}const a=this.scatterList;for(let n=0;n<a.length;n+=1){const r=a[n];"object"==typeof r.over&&(r.createPath(),r.context.isPointInPath(t,e)?("symbol"===r.GENAME&&(r.clean(),r.render({color:r.over.color})),"scatter"===r.GENAME&&(r.stop(),r.start(r.over.color)),"circle"===r.GENAME&&(r.clear(),r.fill(r.over.color)),r.reover=1,this.runIn(r,{x:t/l,y:e/l,screenX:i,screenY:s})):1===r.reover&&("symbol"===r.GENAME&&(r.clean(),r.render()),"scatter"===r.GENAME&&(r.stop(),r.start()),"circle"===r.GENAME&&(r.clear(),r.fill()),r.reover=0,this.runOut(r)))}}),n()(this,"mapOver",()=>{const t=o(this.overFun.bind(this));return e=>{const i=e.target.getBoundingClientRect(),s=e.clientX,n=e.clientY,a=(s-i.left)*l,r=(n-i.top)*l;t(a,r,s,n)}}),n()(this,"runIn",(t,e)=>{"function"==typeof t.over.moveIn&&t.over.moveIn(e)}),n()(this,"runOut",t=>{"function"==typeof t.over.moveOut&&t.over.moveOut()})}componentDidMount(){p(this.canvas.canvas&&this.scatterCanvas.canvas&&this.pathsCanvas.canvas&&this.pathsymbolCanvas.canvas&&this.textCanvas.canvas,this.mapRender.bind(this))}componentWillReceiveProps(){setTimeout(()=>{this.canvas.initCanvas(),this.scatterCanvas.initCanvas(),this.pathsCanvas.initCanvas(),this.pathsymbolCanvas.initCanvas(),this.textCanvas.initCanvas(),this.mapRender()},0)}componentWillUnmount(){this.areaList=[],this.scatterList.forEach(t=>{"function"==typeof t.stop&&t.stop()}),this.pathsList.forEach(t=>{"function"==typeof t.stop&&t.stop()}),this.scatterList=[],this.pathsList=[]}render(){const{zIndex:{scatters:t=3,areas:e=1,paths:i=2}={}}=this.props;return r.a.createElement("div",{onMouseMove:this.mapOver(),onClick:this.mapClick,id:"ge-canvas",style:{position:"relative",width:"100%",height:"100%"}},r.a.createElement(v,{ref:t=>this.pathsCanvas=t,style:{position:"absolute",top:0,left:0,zIndex:i}}),r.a.createElement(v,{ref:t=>this.canvas=t,style:{position:"absolute",top:0,left:0,zIndex:e}}),r.a.createElement(v,{ref:t=>this.scatterCanvas=t,style:{position:"absolute",top:0,left:0,zIndex:t}}),r.a.createElement(v,{ref:t=>this.pathsymbolCanvas=t,style:{position:"absolute",top:0,left:0,zIndex:4}}),r.a.createElement(v,{ref:t=>this.textCanvas=t,style:{position:"absolute",top:0,left:0,zIndex:10}}))}}e.default=_}])}));